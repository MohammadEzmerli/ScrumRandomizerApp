@using System.Threading

<Microsoft.MobileBlazorBindings.Elements.StackLayout Margin=" new Thickness(25)">

    @if (CurrentScrumParticipant != null)
    {
        <Microsoft.MobileBlazorBindings.Elements.Label Text="@CurrentScrumParticipant.Name"
                                                   TextColor="Color.Black"
                                                   HorizontalTextAlignment="TextAlignment.Center"
                                                   Scale="4" />

        <Microsoft.MobileBlazorBindings.Elements.ProgressBar @ref="_progressBar"
                                                         Progress="@_progressPercentComplete"
                                                         HeightRequest="10"
                                                         Margin="new Thickness(20)"
                                                         FlowDirection="FlowDirection.RightToLeft"
                                                         BackgroundColor="Color.OrangeRed" />
    }

</Microsoft.MobileBlazorBindings.Elements.StackLayout>

@code {
    [Parameter]
    public ScrumParticipant CurrentScrumParticipant { get; set; }

    [Parameter]
    public double ScrumTime { get; set; } = 90;

    private Microsoft.MobileBlazorBindings.Elements.ProgressBar _progressBar;
    private double _progressPercentComplete { get; set; }
    private Timer _timer;
    private double _progressedSeconds = 0;

    protected override async Task OnInitializedAsync()
    {
        _timer = new Timer(
        TickTimer,
        state: null,
        dueTime: TimeSpan.Zero,
        period: new TimeSpan(hours: 0, minutes: 0, seconds: 1));
    }

    private void TickTimer(object state)
    {
        _progressPercentComplete += 0.01;
    }
}